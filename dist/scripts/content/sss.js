let profanityWords='';var URL=chrome.extension.getURL('../../common/profanity_list_en.json'),request=new XMLHttpRequest;if(request.open('GET',URL,!1),request.send(null),200===request.status){var msgs=JSON.parse(request.responseText);profanityWords=msgs.list;}console.log(profanityWords);var curWebsite='';function setWebsite(e){curWebsite=e;}function execute(){for(var e=0,t=profanityWords.length;e<t;e++){let t=profanityWords[e];matchText(document.body,new RegExp('\\b'+t+'\\b','i'),function(e,t,r){var n=document.createElement('span');return n.id='SSS-blur',n.textContent=t,n.style.filter='blur(5px)',n.addEventListener('mouseover',mouseOver,!1),n.addEventListener('mouseout',mouseOut,!1),n;});}}chrome.storage.sync.get(['website'],function(e){setWebsite(e.website);});var counter=0,targetNode=document.getElementsByTagName('div')[0],config={childList:!0,subtree:!0},callback=function(e,t){counter%10===0&&execute(),counter+=1,e.forEach(function(e){e.addedNodes.forEach(function(e){1===e.nodeType&&('facebook.com'===curWebsite&&facebook_hatespeech(e),'twitter.com'===curWebsite&&twitter_hatespeech(e));});});},observer=new MutationObserver(callback);observer.observe(targetNode,config);var matchText=function(e,t,r,n){n||(n=['script','style','iframe','canvas','i','button','input','head','form','noscript','header','img']);for(var o=e.firstChild;o;){switch(o.nodeType){case 1:if(n.indexOf(o.tagName.toLowerCase())>-1)break;'SSS-blur'!==o.id&&matchText(o,t,r,n);break;case 3:var s=0;o.data.replace(t,function(e){var t,n=[].slice.call(arguments),a=n[n.length-2],i=o.splitText(a+s);s-=o.data.length+e.length,i.data=i.data.substr(e.length),t=r.apply(window,[o].concat(n)),o.parentNode.insertBefore(t,i),o=i;}),t.lastIndex=0;}o=o.nextSibling;}return e;};function mouseOver(){this.style.filter='blur(0px)';}function mouseOut(){this.style.filter='blur(5px)';}